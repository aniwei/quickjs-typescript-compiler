# 5.2 ForOf（带 IteratorClose）

```mermaid
flowchart TD
  FO[emitForOf] --> I1[iter = obj[Symbol.iterator]()] --> I2[done=true]
  I2 --> TRY[try]
  TRY --> L1[step = iter.next()]
  L1 --> D{step.done?}
  D -- 是 --> I3[done=true -> finally]
  D -- 否 --> I4[done=false; v=step.value 绑定目标]
  I4 --> BODY[循环体]
  BODY --> CONT[continue -> 回到 L1]
  TRY --> FINALLY
  FINALLY --> Z{iteratorCloseForOf 且 !done?}
  Z -- 否 --> END
  Z -- 是 --> RET[ret=iter.return; 非空则 ret.call(iter)] --> END
```
