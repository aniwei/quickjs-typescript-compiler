# 5.1 ForIn（严格路径）

```mermaid
flowchart TD
  FI[emitForIn(strict)] --> K1[obj->cur]
  K1 --> K2[seen={} keys=[]]
  K2 --> L{cur!=null?}
  L -- 否 --> M[i=0]
  L -- 是 --> N[names = O.getOwnPropertyNames(cur)]
  N --> O[i=0]
  O --> P{i<names.length?}
  P -- 否 --> Q[cur=O.getPrototypeOf(cur)] --> L
  P -- 是 --> R[k=names[i]]
  R --> E1[if enumerable?]
  E1 -->|否| O
  E1 -->|是| E2{seen[k]?}
  E2 -- 是 --> O
  E2 -- 否 --> E3[seen[k]=1; keys.push(k)] --> O
  M --> T{i<keys.length?}
  T -- 否 --> U[end]
  T -- 是 --> V[k=keys[i] -> 绑定目标 -> 循环体] --> M
```
